<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="What the package does (one paragraph).">
<title>Suite of Functions to Tag Text for Multidimensional Analysis • dtagger</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Suite of Functions to Tag Text for Multidimensional Analysis">
<meta property="og:description" content="What the package does (one paragraph).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">dtagger</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/timmarchand/dtagger/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="dtagger">dtagger<a class="anchor" aria-label="anchor" href="#dtagger"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The dtagger package is an R package that replicates Biber’s (1988) Multidimensional analysis and Nini’s (2019) Multi-Dimensional Analysis Tagger (MAT) tool. The most important function is dtag_directory, which tags a directory of folders of plain text files with MDA tags.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of dtagger from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"timmarchand/dtagger"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage-dtag_directory">Usage <code>dtag_directory</code>
<a class="anchor" aria-label="anchor" href="#usage-dtag_directory"></a>
</h2>
<p>The main function in dtagger is <code>dtag_directory</code>, which tags a directory of plain text files with MDA tags. The tagged text is then used to calculate dimension scores based on Biber’s (1988) standard.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/timmarchand/dtagger" class="external-link">dtagger</a></span><span class="op">)</span></span>
<span><span class="co">## basic example code</span></span>
<span><span class="fu"><a href="reference/dtag_directory.html">dtag_directory</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"path_to_folder"</span>, n <span class="op">=</span> <span class="cn">NULL</span>, ST <span class="op">=</span> <span class="cn">FALSE</span>, deflated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h3>
<ul>
<li><p><code>path</code>: A character string denoting the folder containing the target folders (at any level).</p></li>
<li><p><code>n</code>: An optional argument denoting the maximum number of text files to be analyzed.</p></li>
<li><p><code>ST</code>: Logical argument denoting whether the text files have _ST tags included already.</p></li>
<li><p><code>deflated</code>: Logical argument. If TRUE (default), returns the dimension scores with “deflated” results, which means rare features from Biber’s original study (mean freq &lt; 0.1) are removed from the Dimension score calculations.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a>
</h3>
<p>The function returns a list of tibbles including the tagged texts, individual and corpus-level scores for each dimension of the text and word counts.</p>
<p>If the function detects more than one corpus folder (folders prefixed with $$), it will also return the result of post-hoc significance tests.</p>
<p>This is a set of confidence intervals on the differences between the means of the dimension scores based on the Studentized range statistic, Tukey’s ‘Honest Significant Difference’ method.</p>
<ul>
<li><p>corpus_dimension_scores: A tibble containing the name of the corpus folder, the closest text type for average corpus dimensions, the mode of the closest text type for the documents within the corpus folder, and the calculated scores for Dimension1 ~ Dimension6.</p></li>
<li><p>document_dimension_scores: A tibble containing the name of the corpus folder, the name of the text file, the calculated scores for Dimension1 ~ Dimension6, the closest matching text type for each doc_id, based on Biber (1989), and the MDA tags.</p></li>
<li><p>dimension_tags: A tibble containing the corpus name, doc_id, the Dimension1 ~ Dimension6 scores, the MDA tags, and additional information for each MDA tag.</p></li>
<li><p>tokenized_tags: A tibble containing the corpus name, doc_id, the text tokenized on each _ST tag, and the text tokenized on each <mda> tag.</mda></p></li>
<li><p>Tukey_hsd: A tibble containing the dimension for pairwise comparison, the corpora under pairwise comparison, the expected difference in means after aov (zero), the difference in means after aov, the 95% familywise lower confidence level, the 95% familywise upper confidence level, and the significance test.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Biber, D. (1988). Variation across Speech and Writing. Cambridge: Cambridge University Press. <a href="doi:10.1017/CBO9780511621024" class="uri">doi:10.1017/CBO9780511621024</a></p></li>
<li><p>Biber, D. (1989). A typology of English texts. , 27(1), 3-44. <a href="https://doi.org/10.1515/ling.1989.27.1.3" class="external-link uri">https://doi.org/10.1515/ling.1989.27.1.3</a></p></li>
<li><p>Nini, A. (2019). The Multi-Dimensional Analysis Tagger. In Berber Sardinha, T. &amp; Veirano Pinto M. (eds), Multi-Dimensional Analysis: Research Methods and Current Issues, 67-94, London; New York: Bloomsbury Academic.</p></li>
</ol>
</div>
</div>
</div>
<div class="section level1">
<h1 id="other-functions">Other functions<a class="anchor" aria-label="anchor" href="#other-functions"></a>
</h1>
<p>The <code>dtag_directory</code> function is a wrapper for a number of other ‘dtagger’ functions that are also accessible in the package, including <code>add_st_tags</code> and <code>add_mda_tags</code>, the latter of which is also modular in structure, allowing users to check and modify the algorithms behind the scenes.</p>
<p>Other utility functions that might be useful beyond the multidimensional analysis include, <code>quick_conc</code>, for fast KWIC (Key Word in Context) concordancing, <code>conc_by_tag</code> to display KWIC results for search results based on tag matches, and <code>missing_tags</code>, to identify where tags produced by one tagger are not found in the output of another.</p>
</div>
<div class="section level1">
<h1 id="add-tag-functions">Add tag functions<a class="anchor" aria-label="anchor" href="#add-tag-functions"></a>
</h1>
<div class="section level2">
<h2 id="add-stanford-_st-tags-with-add_st_tags">Add Stanford _ST tags with <code>add_st_tags</code>
<a class="anchor" aria-label="anchor" href="#add-stanford-_st-tags-with-add_st_tags"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span> <span class="co"># Example text:</span></span>
<span> <span class="va">text</span> <span class="op">&lt;-</span> <span class="st">"This is an example sentence to be tagged"</span></span>
<span> <span class="co"># Example speech, tokenized:</span></span>
<span> <span class="va">speech</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"I"</span>,<span class="st">"don't"</span>, <span class="st">"know"</span> ,  <span class="st">"erm"</span> ,<span class="st">","</span>, <span class="st">"whether"</span> , <span class="st">"to"</span> ,</span>
<span> <span class="st">"include"</span> ,<span class="st">"hesitation"</span> , <span class="st">"markers"</span>, <span class="st">"."</span><span class="op">)</span></span>
<span> <span class="co"># Initiate udpipe model</span></span>
<span> <span class="fu"><a href="reference/init_udpipe_model.html">init_udpipe_model</a></span><span class="op">(</span><span class="op">)</span></span>
<span> <span class="co"># Tag text</span></span>
<span> <span class="fu"><a href="reference/add_st_tags.html">add_st_tags</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span>
<span> <span class="co"># Tag speech</span></span>
<span> <span class="fu"><a href="reference/add_st_tags.html">add_st_tags</a></span><span class="op">(</span><span class="va">speech</span>, st_hesitation <span class="op">=</span> <span class="cn">TRUE</span>, tokenized <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The <code>add_st_tags</code> function is designed to process and annotate text using the Universal Dependencies (UD) model with the udpipe package. It allows users to tokenize and tag text with part-of-speech (Stanford) tags, and to extract and handle hesitation markers. The function provides options for controlling the parsing, tokenizer type, and handling of flattened input.</p>
<div class="section level3">
<h3 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a>
</h3>
<ul>
<li><p>x A character vector of input text to be processed.</p></li>
<li><p>mdl A udpipe model to use for processing the text. The default is the udmodel.</p></li>
<li>
<p>st_hesitation A logical value indicating whether or not to extract hesitation markers</p>
<p>from the input text. If <code>TRUE</code>, the function will extract hesitation markers and return them separately. Default is <code>FALSE</code>.</p>
</li>
<li><p>flattened A logical value indicating if the input text is flattened. If <code>FALSE</code>, i.e. if the character string is in tokenized form, the function will flatten the text before processing. Default is <code>TRUE</code>.</p></li>
<li>
<p>skip_parse A logical value determining if the function should skip parsing</p>
<p>and only return tokenized and tagged text. If <code>FALSE</code>, the function returns the full UD model when parsing. Default is <code>TRUE</code>.</p>
</li>
<li><p>… Additional arguments to be passed to the <code>udpipe_annotate()</code> function. For example:</p></li>
</ul>
<p>– <code>tokenizer = "horizontal"</code> to force the <code>udpipe_annotate</code> function to tokenize on tokens separated by white spaces. This will combine words and trailing punctuation marks, unless they have been spearated by white space previously.</p>
<p>–<code>tokenizer = "vertical"</code> to force the <code>udpipe_annotate</code> function to tokenize on tokens separated by new line breaks. This can be useful if you want the tokenizer to recognise multi-word entities as a single token, or avoid separating hyphenated words.</p>
</div>
<div class="section level3">
<h3 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a>
</h3>
<p>The function returns a character vector of tokenized and tagged text.</p>
<p>If <code>skip_parse</code> is <code>FALSE</code>, the function returns a tibble with the full udpipe model when parsing.</p>
<p>If <code>st_hesitation</code> is <code>TRUE</code> (experimental), the function returns a character vector of tokenized and tagged text with hesitation markers extracted and handled separately.</p>
</div>
<div class="section level3">
<h3 id="dependencies">
<strong>Dependencies</strong><a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h3>
<p>The function requires the <strong><code>udpipe</code></strong> package to be installed and loaded. The <strong><code>udmodel</code></strong> object must also be present in the global environment.</p>
</div>
</div>
<div class="section level2">
<h2 id="add-mda-tags-with-add_mda_tags">Add MDA tags with <code>add_mda_tags()</code>
<a class="anchor" aria-label="anchor" href="#add-mda-tags-with-add_mda_tags"></a>
</h2>
<p>This function adds <mda> tags to a character vector of text. It assumes that the input text has already been tokenized and tagged with Stanford POS (_ST) tags. The function works by applying a series of tagging rules to the text. The rules can be accessed and adjusted by referring to their individual function code files</mda></p>
<div class="section level3">
<h3 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/add_mda_tags.html">add_mda_tags</a></span><span class="op">(</span><span class="va">x</span>, mda_hesitation <span class="op">=</span> <span class="cn">TRUE</span>, progress <span class="op">=</span> <span class="cn">FALSE</span>,<span class="va">...</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a>
</h3>
<ul>
<li><p>x: A character vector containing the text to be tagged.</p></li>
<li><p>mda_hesitation: If TRUE, hesitation markers are extracted from the text. Experimental feature - should hesitation markers be excluded before tagging? Regex for the hesitation markers is the same as the default for dtag_hesitation, but can be set using the regex argument. See <code>dtag_hesitation</code> for details.</p></li>
<li><p>progress: If TRUE, a progress message is printed.</p></li>
</ul>
<p><code>...</code>: Additional arguments to pass on.</p>
</div>
<div class="section level3">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h3>
<p>Here’s a basic example of how to use the add_mda_tags() function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"I_PPSS"</span>, <span class="st">"have_VB"</span>, <span class="st">"a_DET"</span>, <span class="st">"dog_NN"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/add_mda_tags.html">add_mda_tags</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<p>Here’s a more detailed example that shows how to tag text with both _ST and <mda> tags:</mda></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate some text</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="st">"This example is short and sweet. This means that not all the tags will</span></span>
<span><span class="st">have been included, which is why this is really only a guide and it should</span></span>
<span><span class="st">be used with that in mind. Otherwise, I think it may lead to disappointment."</span></span>
<span></span>
<span><span class="co"># Load udpipe model into the global environment for _ST tagging</span></span>
<span><span class="fu"><a href="reference/init_udpipe_model.html">init_udpipe_model</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add Stanford tags to text</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_st_tags.html">add_st_tags</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add &lt;MDA&gt; tags</span></span>
<span><span class="fu"><a href="reference/add_mda_tags.html">add_mda_tags</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="add-a-table-of-st-mda-and-other-ud-tags-with-add_tag_tbl">Add a Table of ST, MDA and Other UD Tags with <code>add_tag_tbl</code>
<a class="anchor" aria-label="anchor" href="#add-a-table-of-st-mda-and-other-ud-tags-with-add_tag_tbl"></a>
</h2>
<p>The <code>add_tag_tbl</code> function is a wrapper around the <code>add_st_tags</code> and <code>add_mda_tags</code> functions that also retains all the Universal Dependency tags produced by the udpipe model.</p>
<div class="section level3">
<h3 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Process text with the add_tag_tbl function</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="st">"This is a sample sentence."</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_tag_tbl.html">add_tag_tbl</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a>
</h3>
<ul>
<li><p>x A character vector of input text to be processed.</p></li>
<li><p>… Additional arguments to be passed to the <code><a href="reference/add_st_tags.html">add_st_tags()</a></code> function.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a>
</h2>
<p>A tibble with the original text annotated with ST tags and MDA tags. The output columns includes: - id columns (<code>doc_id</code>, <code>paragraph_id</code>, <code>sentence_id</code> etc.)</p>
<ul>
<li><p>udpipe output (<code>token</code>, <code>upos</code>, <code>xpos</code>, <code>dep_rel</code>, etc)</p></li>
<li><p>both <code>st</code> and <code>mda</code> tags.</p></li>
</ul>
</div>
</div>
<div class="section level1">
<h1 id="concordancing-functions">Concordancing functions<a class="anchor" aria-label="anchor" href="#concordancing-functions"></a>
</h1>
<div class="section level2">
<h2 id="quick-concordancing-with-quick_conc">Quick concordancing with <code>quick_conc</code>
<a class="anchor" aria-label="anchor" href="#quick-concordancing-with-quick_conc"></a>
</h2>
<p><strong><code>quick_conc</code></strong> is a lightweight concordancing function that returns key words in context (KWIC) in a tidy format. Given a character vector of tokenized strings, <strong><code>x</code></strong>, and either a character vector of regex patterns to match (<strong><code>index</code></strong>) or a numeric vector to use as index of matches, <strong><code>quick_conc</code></strong> returns a tibble with the contextualized text shown around the matched node.</p>
<div class="section level3">
<h3 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/quick_conc.html">quick_conc</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">index</span>, n <span class="op">=</span> <span class="fl">5</span>, tokenize <span class="op">=</span> <span class="cn">FALSE</span>, separated <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a>
</h3>
<ul>
<li><p><code>x</code>: a character vector of tokenized strings, or a single string</p></li>
<li><p><code>index</code>: a character vector of regex patterns to match, or a numeric vector to use as index of matches</p></li>
<li><p><code>n</code>: an integer, to specify the number of context tokens either side of the matched node</p></li>
<li><p><code>tokenize</code>: a logical, to tokenize the text first or not</p></li>
<li><p><code>separated</code>: a logical, to separate the context tokens or not</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"The"</span>, <span class="st">"cat"</span>, <span class="st">"sat"</span>, <span class="st">"on"</span>, <span class="st">"the"</span>, <span class="st">"mat"</span><span class="op">)</span></span>
<span>    <span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"sat"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="reference/quick_conc.html">quick_conc</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">index</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>    </span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"The dog barked loudly, alerting the neighbors of potential danger. A nearby park seemed like the perfect spot for the dog and it quickly made its way there."</span></span>
<span>    <span class="fu"><a href="reference/quick_conc.html">quick_conc</a></span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="st">"dog"</span>, n <span class="op">=</span> <span class="fl">3</span>, tokenize <span class="op">=</span> <span class="cn">TRUE</span>, separated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="reference/quick_conc.html">quick_conc</a></span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">8</span>,<span class="fl">12</span><span class="op">)</span>, tokenize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="concordancing-by-tags-with-conc_by_tag">Concordancing by tags with <code>conc_by_tag</code>
<a class="anchor" aria-label="anchor" href="#concordancing-by-tags-with-conc_by_tag"></a>
</h2>
<p><strong><code>conc_by_tag</code></strong> allows for fine-grained concordance searches of tagged text and is typically used with output from <code><a href="https://rdrr.io/pkg/udpipe/man/udpipe_annotate.html" class="external-link">udpipe::udpipe_annotate</a></code> and <code><a href="reference/dtag_tbl.html">dtagger::dtag_tbl</a></code> , <code><a href="reference/dtag_directory.html">dtagger::dtag_directory</a></code> or <code><a href="reference/add_tag_tbl.html">dtagger::add_tag_tbl</a></code> functions.</p>
<p>The function takes a relational data frame containing the text to concordance as input, along with the name of the column containing the text to concatenate, the name of the column containing the tags to match, the tag to match within the tag column, and identifying details such as corpus, doc_id etc. The function can take up to two tag inputs, for example matching all upos == “ADJ” tags and dep_rel == “amod” tags, and seeing the resulting keywords in context.</p>
</div>
<div class="section level2">
<h2 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="co"># Process text with the add_tag_tbl function (assuming add_mda_tags function is defined)</span></span>
<span> <span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>doc1 <span class="op">=</span> <span class="st">"This is a simple sentence with a specific keyword."</span>,</span>
<span>           doc2 <span class="op">=</span> <span class="st">"Is this one more complex or simpler?"</span><span class="op">)</span></span>
<span> <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_tag_tbl.html">add_tag_tbl</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span>
<span></span>
<span> <span class="co"># Run conc_by_tag function with specified tags and matches</span></span>
<span> <span class="fu"><a href="reference/conc_by_tag.html">conc_by_tag</a></span><span class="op">(</span></span>
<span>   <span class="va">data</span>,</span>
<span>   what <span class="op">=</span> <span class="st">"token"</span>,</span>
<span>   tag <span class="op">=</span> <span class="st">"xpos"</span>,</span>
<span>   match <span class="op">=</span> <span class="st">"^JJ$"</span>,</span>
<span>   cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"doc_id"</span>, <span class="st">"lemma"</span><span class="op">)</span>,</span>
<span>   tag2 <span class="op">=</span> <span class="st">"dep_rel"</span>,</span>
<span>   match2 <span class="op">=</span> <span class="st">"^amod$"</span></span>
<span> <span class="op">)</span></span>
<span> <span class="fu"><a href="reference/conc_by_tag.html">conc_by_tag</a></span><span class="op">(</span></span>
<span>   <span class="va">data</span>,</span>
<span>   what <span class="op">=</span> <span class="st">"token"</span>,</span>
<span>   tag <span class="op">=</span> <span class="st">"xpos"</span>,</span>
<span>   match <span class="op">=</span> <span class="st">"JJ"</span>,</span>
<span>   cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"doc_id"</span>, <span class="st">"dep_rel"</span><span class="op">)</span>,</span>
<span>   separated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>   n <span class="op">=</span> <span class="fl">3</span></span>
<span> <span class="op">)</span></span></code></pre></div>
<p>The <strong><code>conc_by_tag</code></strong> function produces concordance lines of text from <strong><code>data</code></strong> by finding up to two tag matches in tokenized text. The input should be a dataframe with a column for tokens in tokenized form, and separate columns for tags, document and corpus details. Typically, the function can be used with output from <strong><code><a href="https://rdrr.io/pkg/udpipe/man/udpipe_annotate.html" class="external-link">udpipe::udpipe_annotate</a></code></strong> and <strong><code><a href="reference/dtag_tbl.html">dtagger::dtag_tbl</a></code></strong> or <strong><code>dtagger::add_tab_tbl</code></strong> functions.</p>
<p>The concordancer can take up to two tag inputs, for example matching all <strong><code>upos == "ADJ"</code></strong> tags and <strong><code>dep_rel == "amod"</code></strong> tags, and seeing the resulting key words in context.</p>
<p>The output is a data frame of KWIC format, containing the specified match at the centre, and left and right windows of the concordancing.</p>
</div>
<div class="section level2">
<h2 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a>
</h2>
<ul>
<li><p><code>data</code>: A relational data frame containing the text to concordance.</p></li>
<li><p><code>what</code>: The name of the column containing the text to concatenate. Default is “token”.</p></li>
<li><p><code>tag</code>: The name of the column containing the tags to match. Default is “mda_tags”.</p></li>
<li><p><code>match</code>: The tag to match within the <strong><code>tag</code></strong> column.</p></li>
<li><p><code>cols</code>: The names of the columns to include in the output. By default, these will include corpus, doc_id, sentence, but need to be changed if the inputting df has different columns.</p></li>
<li><p><code>tag2</code>: The name of the second column containing the tags to match (optional).</p></li>
<li><p><code>match2</code>: The second tag to match within the <strong><code>tag2</code></strong> column (optional).</p></li>
<li><p><code>...</code>: Additional arguments to be passed onto <strong><code><a href="reference/quick_conc.html">dtagger::quick_conc</a></code></strong>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a>
</h2>
<ul>
<li><p><code>case</code> - a case number for the match found.</p></li>
<li><p><code>left</code> - objects immediately adjacent (up to n) to the left of the matched node,</p></li>
</ul>
<p>as defined by the <code>what</code> argument (default is token).</p>
<p>In case of <code>separated = TRUE</code>, the left are separated into left(n):left1</p>
<ul>
<li><p>match - the matched search item, as defined by the <code>match</code> argument.</p></li>
<li><p>right - tokens immediately adjacent (up to n) to the right of the matched node,</p></li>
</ul>
<p>as defined by the <code>what</code> argument (default is token).</p>
<p>In case of <code>separated = TRUE</code>, the right tokens are separated into right1:right(n).</p>
<ul>
<li><p>index - the index row position of matched result from the input data frame.</p></li>
<li><p>other cols - as defined by the <code>tag</code>, <code>tag2</code> and <code>cols</code> arguments.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="compare-tagging-output-with-missing_tags">Compare tagging output with <code>missing_tags</code>
<a class="anchor" aria-label="anchor" href="#compare-tagging-output-with-missing_tags"></a>
</h2>
<p>The <strong><code>missing_tags</code></strong> function is used to compare the tagging results of two character vectors in tokenised form. The function produces concordance lines of where tags in the first vector are missing from the same index position in the second vector. Both inputs should be exactly the same length.</p>
<p>For the function to work as expected, the two vectors should be of equal length and alligned by token.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># create two example vectors</span></span>
<span><span class="co"># vec1 tagged with ewt udpipe English model</span></span>
<span><span class="va">vec1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"This_DT"</span>, <span class="st">"is_VBZ"</span>, <span class="st">"a_DT"</span>, <span class="st">"test_NN"</span>, <span class="st">"sentence_NN"</span>, <span class="st">"with_IN"</span>, </span>
<span><span class="st">"tags_NNS"</span>, <span class="st">"._."</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># vec2 tagged with line udpipe English model</span></span>
<span></span>
<span><span class="va">vec2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"This_DEM-SG"</span>, <span class="st">"is_PRES"</span>, <span class="st">"a_IND-SG"</span>, <span class="st">"test_SG-NOM"</span>, <span class="st">"sentence_SG-NOM"</span>, </span>
<span><span class="cn">NA</span>, <span class="st">"tags_PL-NOM"</span>, <span class="st">"._Period"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># find tags in vec1 that are missing in vec2</span></span>
<span><span class="fu"><a href="reference/missing_tags.html">missing_tags</a></span><span class="op">(</span><span class="va">vec1</span>, <span class="va">vec2</span>, regex <span class="op">=</span> <span class="st">"DT"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find tags in vec2 that are missing in vec1</span></span>
<span><span class="fu"><a href="reference/missing_tags.html">missing_tags</a></span><span class="op">(</span><span class="va">vec2</span>, <span class="va">vec1</span>, regex <span class="op">=</span> <span class="st">"Period"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find tags in vec1 that are missing in vec2 but with different tag searches</span></span>
<span><span class="fu"><a href="reference/missing_tags.html">missing_tags</a></span><span class="op">(</span><span class="va">vec1</span>, <span class="va">vec2</span>, regex1 <span class="op">=</span> <span class="st">"DT"</span>, regex2 <span class="op">=</span> <span class="st">"IND-SG"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/timmarchand/dtagger/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/timmarchand/dtagger/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dtagger</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Tim Marchand <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tim Marchand.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
